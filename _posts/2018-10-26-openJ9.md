---
layout: post
title:  "Оптимизируем Eclipse"
date:   2018-10-26 13:00:00 +0300
categories: Obvious
---


Дано: Eclipse IDE 2018-09 (4.9.0)

Цель: оптимизация производительности

На мой взгляд, OpenJDK Java 11 относительно плохо оптимизирована для клиентских
приложений. Самые интересные оптимизации начинаются на прогретом
коде (более 10к вызовов). Что в клиентских приложениях не всегда достижимо.

Проблему могла бы решить [Ahead-of-Time](http://openjdk.java.net/jeps/295)
(AOT) компиляция. Только вот она странно реализована и Eclipse просто 
не компилируется.

Зато в [OpenJ9](http://www.eclipse.org/openj9/) можно легко настроить AOT. 
Заодно подкрутить настройки JIT.

## Запуск Eclipse под OpenJ9

В начало eclipse.ini прописываем

```
-vm
/путь/до/jdk-11+28/lib/server/libjvm.so
```

## Оптимизация OpenJ9

Активируем AOT+JIT для редко исполняемого кода. Опять же в eclipse.ini прописываем:

```
-Xjit:count=1
-Xscmx256M
-Xshareclasses
-Xaot:count=1
-Xscmaxaot256m
-Xaggressive
-Xquickstart
```

Кеш кода увеличен до 256 Мб, все таки код Eclipse достаточно объемный.
Плюс активированы опции для ускорения запуска приложения.
